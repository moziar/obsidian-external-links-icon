/***
通用样式
***/

/* Note: the global pseudo-element `body .external-link::after` was removed so
   that only links with an associated icon receive the ::after element. The
   plugin now emits the ::after base rules per-matching-selector when
   generating CSS for each icon in `main.ts`. This preserves Obsidian's
   default suffix behavior for non-matching links. */

/***
模态窗口样式
***/

/* Add Website 和 Add URL Scheme 模态窗口样式 */
.external-links-icon-modal-container {
	font-family: var(--font-interface);
}

.external-links-icon-modal {
	background-color: var(--background-primary);
	border-radius: 8px;
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
	border: 1px solid var(--divider-color);
	padding: 0;
	max-width: 500px;
	width: 90vw;
}

.external-links-icon-modal-header {
	padding: 16px 20px;
	border-bottom: 1px solid var(--divider-color);
	background-color: var(--background-secondary);
	border-radius: 8px 8px 0 0;
}

.external-links-icon-modal-header h3 {
	margin: 0;
	font-size: 18px;
	font-weight: 600;
	color: var(--text-normal);
}

.external-links-icon-modal-content {
	padding: 20px;
}

.external-links-icon-modal-content > div {
	margin-bottom: 16px;
	color: var(--text-muted);
	font-size: 14px;
	line-height: 1.5;
}

.external-links-icon-modal-input {
	width: 100%;
	padding: 8px 12px;
	border: 1px solid var(--interactive-accent);
	border-radius: 4px;
	background-color: var(--background-modifier-form-field);
	color: var(--text-normal);
	font-size: 14px;
	transition: border-color 0.2s ease;
	box-sizing: border-box;
	margin-top: 8px;
	margin-bottom: 16px;
}

.external-links-icon-modal-input:focus {
	outline: none;
	border-color: var(--interactive-accent-hover);
	box-shadow: 0 0 0 2px var(--background-modifier-active);
}

.external-links-icon-modal-input::placeholder {
	color: var(--text-muted);
}

.external-links-icon-upload-row {
	display: flex;
	align-items: center;
	gap: 12px;
	padding: 12px;
	background-color: var(--background-secondary);
	border-radius: 4px;
	border: 1px dashed var(--interactive-accent);
	margin-top: 8px;
	margin-bottom: 16px;
}

.external-links-icon-upload-btn {
	background-color: var(--interactive-accent);
	color: var(--text-on-accent);
	border: none;
	padding: 6px 12px;
	border-radius: 4px;
	cursor: pointer;
	font-size: 14px;
	transition: background-color 0.2s ease;
	flex-shrink: 0;
}

.external-links-icon-upload-btn:hover {
	background-color: var(--interactive-accent-hover);
}

.external-links-icon-upload-name {
	flex-grow: 1;
	color: var(--text-muted);
	font-size: 14px;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
}

.external-links-icon-preview-div {
	width: 48px;
	height: 24px;
	overflow: hidden;
	flex-shrink: 0;
	background-color: var(--background-primary);
	border-radius: 2px;
	display: flex;
	align-items: center;
	justify-content: center;
}

.external-links-icon-modal-actions {
	display: flex;
	justify-content: flex-end;
	gap: 12px;
	padding: 16px 20px 20px;
	border-top: 1px solid var(--divider-color);
}

.external-links-icon-modal-actions button {
	padding: 8px 16px;
	border-radius: 4px;
	font-size: 14px;
	font-weight: 500;
	cursor: pointer;
	transition: all 0.2s ease;
	border: 1px solid transparent;
}

.external-links-icon-cancel-btn {
	background-color: var(--background-secondary);
	color: var(--text-normal);
	border-color: var(--divider-color);
}

.external-links-icon-cancel-btn:hover {
	background-color: var(--background-modifier-hover);
}

.external-links-icon-add-btn {
	background-color: var(--interactive-accent);
	color: var(--text-on-accent);
}

.external-links-icon-add-btn:hover {
	background-color: var(--interactive-accent-hover);
}

.external-links-icon-modal-actions button:active {
	transform: translateY(1px);
}

/***
设置页面按钮样式
***/

.add-buttons {
	display: flex;
	gap: 8px;
	margin: 12px 0;
}

.add-buttons button {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border: none;
	padding: 8px 16px;
	border-radius: 4px;
	cursor: pointer;
	font-size: 14px;
	font-weight: 500;
	transition: background-color 0.2s ease;
}

.add-buttons button:hover {
	background: var(--interactive-accent-hover);
}

/***
URL Scheme 链接
***/

/* Note: per-link padding/background removal is now applied only to matching
   selectors generated by the plugin's runtime CSS. The broad rule that
   removed suffixes for all external links when the feature was enabled has
   been removed to preserve Obsidian's default suffix behavior for links
   that don't have an associated icon. */

/***
Web 页面链接
***/

/* See note above: specific selectors (listed below and generated at runtime)
   will hide the default suffix when appropriate. */

/* 去掉特定网站的默认样式 */
body.fancy-web-link .external-link[href^="https://"][href*="github.com"],
body.fancy-web-link .external-link[href^="https://"][href*="sspai.com"],
body.fancy-web-link .external-link[href^="https://"][href*="weixin.qq.com"],
body.fancy-web-link .external-link[href^="https://"][href*="xiaoyuzhoufm.com"],
body.fancy-web-link .external-link[href^="https://"][href*="douban.com"],
body.fancy-web-link .external-link[href^="https://"][href*="bilibili.com"],
body.fancy-web-link .external-link[href^="https://"][href*="youtube.com"],
body.fancy-web-link .external-link[href^="https://"][href*="medium.com"],
body.fancy-web-link .external-link[href^="https://"][href*="ollama.com"],
body.fancy-web-link .external-link[href^="https://"][href*="modelscope.cn"],
body.fancy-web-link .external-link[href^="https://"][href*="huggingface.co"],
body.fancy-web-link .external-link[href^="https://"][href*="openrouter.ai"],
body.fancy-web-link .external-link[href^="https://"][href*="siliconflow.cn"],
body.fancy-web-link .external-link[href^="https://"][href*="douyin.com"],
body.fancy-web-link .external-link[href^="https://"][href*="tiktok.com"],
body.fancy-web-link .external-link[href^="https://"][href*="baidu.com"],
body.fancy-web-link .external-link[href^="https://"][href*="flomoapp.com"],
body.fancy-web-link .external-link[href^="https://"][href*="wikipedia.org"],
body.fancy-web-link .external-link[href^="https://"][href*="archive.org"],
body.fancy-web-link .external-link[href^="https://"][href*="google.com"],
body.fancy-web-link .external-link[href^="https://"][href*="docs.google.com"],
body.fancy-web-link .external-link[href^="https://"][href*="cloud.google.com"] {
    background: none;
    padding-right: 0;
}

/***
Obsidian Web 链接
***/

body.fancy-obsidian-web-link .external-link[href^="https://"][href*="obsidian.md"] {
	background: none;
	padding-right: 0;
}

/***
Obsidian 笔记链接
***/

body.fancy-external-obsidian-link .external-link[href^="obsidian"],
body.fancy-both-obsidian-link .external-link[href^="obsidian"] {
	background: none;
	padding-right: 0;
}

body.fancy-internal-obsidian-link .internal-link:after,
body.fancy-both-obsidian-link .internal-link:after,
body.fancy-external-obsidian-link .external-link[href^="obsidian"]:after,
body.fancy-both-obsidian-link .external-link[href^="obsidian"]:after {
	margin-left: 2px;
	display: inline-block;
	width: .8em;
	height: .8em;
	content: " ";
}

/***
Obsidian 高级 URI 链接
***/

body.fancy-advanced-uri-link .external-link[href^="obsidian://adv-uri"][href*="settingid"] {
	background: none;
	padding-right: 0;
}

body.fancy-advanced-uri-link .external-link[href^="obsidian://adv-uri"][href*="settingid"]:after {
	margin-left: 2px;
	display: inline-block;
	width: .8em;
	height: .8em;
	content: " ";
}

/* @settings

name: External Links Icon
id: external-links-icon
settings:
    - 
        id: fancy-url-scheme
        title: Fancy url scheme
        description: Enable icons for url schemes.
        type: class-toggle
        default: true
    -
        id: fancy-web-link
        title: Fancy web link
        description: Enable icons for web page links.
        type: class-toggle
        default: true
    -
        id: fancy-obsidian-web-link
        title: Fancy obsidian web link
        description: Enable icons for Obsidian website links. Turn this off if you find the icons confusing with Fancy obsidian note link described below.
    	type: class-toggle
    	default: true
    -
        id: fancy-obsidian-note-link
        title: Fancy obsidian note link
        description: Enable internal links or external vault links icon. Choose the behavior that best fits your workflow.
        type: class-select
        allowEmpty: yes
        default: none
        options:
        	-
        	    label: internal
        		value: fancy-internal-obsidian-link
        	-
        		label: external
        		value: fancy-external-obsidian-link
        	-
        		label: both
        		value: fancy-both-obsidian-link
    -
        id: fancy-advanced-uri-link
        title: Fancy advanced uri link
        description: Enable icons for advanced uri links.
    	type: class-toggle
    	default: true
*/

.svg-preview-container {
	display: flex;
	align-items: center;
	gap: 8px;
}

.svg-preview-container svg {
	max-width: 100%;
	max-height: 100%;
}

/* Settings add buttons */
.add-buttons button {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border: none;
	padding: 6px 8px;
	border-radius: 4px;
	cursor: pointer;
}

/* Controls area: make buttons fixed width so right-side length stays consistent */
.icon-setting-item .setting-item-control .mod-cta,
.icon-setting-item .setting-item-control button {
	min-width: 36px;
}

.icon-setting-item .setting-item-control button[disabled],
.icon-setting-item .setting-item-control .mod-cta[disabled] {
	opacity: 0.45;
	cursor: default;
}

/* Disable animations/transitions/transforms on buttons in plugin settings
   to avoid misleading animated effects that look like bugs. Use high
   specificity and !important to override Obsidian defaults where needed. */
.icon-setting-item .setting-item-control button,
.icon-setting-item .setting-item-control .mod-cta,
.add-buttons button,
.external-links-icon-upload-btn,
.svg-preview-container button,
.website-item button,
.scheme-item button {
	transition: none !important;
	animation: none !important;
	transform: none !important;
	box-shadow: none !important;
	outline: none !important;
	filter: none !important;
	-webkit-tap-highlight-color: transparent !important;
}

/* Also ensure hover/focus/active states don't apply transforms or transitions */
.icon-setting-item .setting-item-control button:hover,
.icon-setting-item .setting-item-control button:focus,
.icon-setting-item .setting-item-control button:active,
.add-buttons button:hover,
.add-buttons button:focus,
.add-buttons button:active,
.external-links-icon-upload-btn:hover,
.external-links-icon-upload-btn:focus,
.external-links-icon-upload-btn:active,
.website-item button:hover,
.website-item button:focus,
.website-item button:active,
.scheme-item button:hover,
.scheme-item button:focus,
.scheme-item button:active {
	transition: none !important;
	animation: none !important;
	transform: none !important;
	box-shadow: none !important;
	outline: none !important;
	filter: none !important;
}

/* Remove pseudo-element effects that could draw shapes on click */
.icon-setting-item .setting-item-control button::before,
.icon-setting-item .setting-item-control button::after,
.add-buttons button::before,
.add-buttons button::after,
.external-links-icon-upload-btn::before,
.external-links-icon-upload-btn::after,
.website-item button::before,
.website-item button::after,
.scheme-item button::before,
.scheme-item button::after {
	content: none !important;
	display: none !important;
}

/* details styling for built-in lists */
details.builtin-list {
	margin-top: 8px;
	margin-bottom: 8px;
}
details.builtin-list summary {
	font-weight: 600;
	cursor: pointer;
}

/* Built-in icons container */
.builtin-list > div {
	display: flex;
	gap: 8px;
	padding: 6px 0;
}

.website-item, .scheme-item {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 6px;
	border: 1px solid var(--interactive-muted);
	border-radius: 6px;
}

/* svg preview in modal */
.external-links-icon-preview-div {
	display: inline-block;
	vertical-align: middle;
}